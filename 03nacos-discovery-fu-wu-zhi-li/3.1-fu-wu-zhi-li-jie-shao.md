# 3.1 服务治理介绍

先来思考一个问题 通过上一章的操作，我们已经可以实现微服务之间的调用。但是我们把服务提供者的网络地址（ip，端 口）等硬编码到了代码中，这种做法存在许多问题：&#x20;

* 一旦服务提供者地址变化，就需要手工修改代码
* 一旦是多个服务提供者，无法实现负载均衡功能
* 一旦服务变得越来越多，人工维护调用关系困难

那么应该怎么解决呢， 这时候就需要通过**注册中心动态的实现服务治理**。

**什么是服务治理**&#x20;

服务治理是微服务架构中最核心最基本的模块。用于实现各个微服务的自动化注册与发现。&#x20;

* **服务注册**：在服务治理框架中，都会构建一个注册中心，每个服务单元向注册中心登记自己提供服 务的详细信息。并在注册中心形成一张服务的清单，服务注册中心需要以心跳的方式去监测清单中 的服务是否可用，如果不可用，需要在服务清单中剔除不可用的服务。
* &#x20;**服务发现**：服务调用方向服务注册中心咨询服务，并获取所有服务的实例清单，实现对具体服务实 例的访问。

![](<../.gitbook/assets/image (30).png>)

通过上面的调用图会发现，除了微服务，还有一个组件是服务注册中心，它是微服务架构非常重要的一 个组件，在微服务架构里主要起到了协调者的一个作用。注册中心一般包含如下几个功能：

1. 服务发现：&#x20;
   1. **服务注册**：保存服务提供者和服务调用者的信息&#x20;
   2. **服务订阅**：服务调用者订阅服务提供者的信息，注册中心向订阅者推送提供者的信息
2. 服务配置：&#x20;
   1. **配置订阅**：服务提供者和服务调用者订阅微服务相关的配置&#x20;
   2. **配置下发**：主动将配置推送给服务提供者和服务调用者
3. 服务健康检测&#x20;
   1. 检测服务提供者的健康情况，如果发现异常，执行服务剔除

**常见的注册中心：**

* **Zookeeper** zookeeper是一个分布式服务框架，是Apache Hadoop 的一个子项目，它主要是用来解决分布式 应用中经常遇到的一些数据管理问题，如：统一命名服务、状态同步服务、集群管理、分布式应用 配置项的管理等。&#x20;
* **Eureka** Eureka是Springcloud Netflix中的重要组件，主要作用就是做服务注册和发现。但是现在已经闭源&#x20;
* **Consul** Consul是基于GO语言开发的开源工具，主要面向分布式，服务化的系统提供服务注册、服务发现 和配置管理的功能。Consul的功能都很实用，其中包括：服务注册/发现、健康检查、Key/Value 存储、多数据中心和分布式一致性保证等特性。Consul本身只是一个二进制的可执行文件，所以 安装和部署都非常简单，只需要从官网下载后，在执行对应的启动脚本即可。&#x20;
* **Nacos** Nacos是一个更易于构建云原生应用的动态服务发现、配置管理和服务管理平台。它是SpringCloud Alibaba 组件之一，负责服务注册发现和服务配置，可以这样认为 nacos=eureka+config。

